<?xml version="1.0" encoding="utf-8"?>
<table release-module="AIData" release-side="server" type="script" version="1.141">
  <!--script\scriptdata.id_musintower3.xml-->
  
  
  

  
    
  <script alias="Zone_MusinTower_16_Default_ai">
    <decision event="enter-zone">
      <reaction-set>
        <reaction text="necostar 4960존 enter" type="debug-trace" />        
      </reaction-set>
    </decision>
  </script>

  
  <script alias="Zone_MusinTower_17_Default_ai">
    <decision event="enter-zone">
      <reaction-set>
        <reaction text="necostar 4961존 enter" type="debug-trace" />
      </reaction-set>
    </decision>
  </script>
  
  
  <script alias="Zone_MusinTower_18_Default_ai">
    <decision event="enter-zone">
      <reaction-set>
        <reaction text="necostar 4962존 enter" type="debug-trace" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="Zone_MusinTower_19_Default_ai">
    <decision event="enter-zone">
      <reaction-set>
        <reaction text="necostar 4963존 enter" type="debug-trace" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="Zone_MusinTower_20_Default_ai">
    <decision event="enter-zone">
      <reaction-set>
        <reaction text="necostar 4964존 enter" type="debug-trace" />
      </reaction-set>
    </decision>
  </script>
  
  
  
  

  <script alias="Zone_MusinTower_16_ai">
    <decision event="zone-open">
      <reaction-set probability="34">
        <reaction text="necostar 16층 민아 설아 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_2" target-2="zonenpcspawn:A_4970_3" target-3="zonenpcspawn:A_4970_4" type="despawn-npc" />
        <reaction amount="1" reg="1" target="zonenpcsquad:4970_2_S" type="set-party-number" />
        <reaction spawn-1="A_4970_4" spawn-2="A_4970_2" spawn-3="A_4970_50" spawn-delay="0" type="spawn-npc" />        
      </reaction-set>
      <reaction-set probability="33">
        <reaction text="necostar 16층 현아 설아 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_2" target-2="zonenpcspawn:A_4970_3" target-3="zonenpcspawn:A_4970_4" type="despawn-npc" />
        <reaction amount="2" reg="1" target="zonenpcsquad:4970_2_S" type="set-party-number" />
        <reaction spawn-1="A_4970_3" spawn-2="A_4970_2" spawn-3="A_4970_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>
      <reaction-set probability="33">
        <reaction text="necostar 16층 민아 현아 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_2" target-2="zonenpcspawn:A_4970_3" target-3="zonenpcspawn:A_4970_4" type="despawn-npc" />
        <reaction amount="3" reg="1" target="zonenpcsquad:4970_2_S" type="set-party-number" />
        <reaction spawn-1="A_4970_4" spawn-2="A_4970_3" spawn-3="A_4970_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>      
    </decision>
  </script>

  
  <script alias="Zone_MusinTower_17_ai">
    <decision event="zone-open">
      <reaction-set probability="50">
        <reaction text="necostar 17층 익현 흑마령 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4971_2" target-2="zonenpcspawn:A_4971_3" target-3="zonenpcspawn:A_4971_4" type="despawn-npc" />
        <reaction amount="1" reg="1" target="zonenpcsquad:4971_2_S" type="set-party-number" />
        <reaction spawn-1="A_4971_2" spawn-2="A_4971_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>
      <reaction-set probability="50">
        <reaction text="necostar 17층 익현 적마령 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4971_2" target-2="zonenpcspawn:A_4971_3" target-3="zonenpcspawn:A_4971_4" type="despawn-npc" />
        <reaction amount="2" reg="1" target="zonenpcsquad:4971_2_S" type="set-party-number" />
        <reaction spawn-1="A_4971_2" spawn-2="A_4971_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>      
    </decision>
  </script>

  
  <script alias="Zone_MusinTower_18_ai">
    <decision event="zone-open">
      <reaction-set probability="50">
        <reaction text="necostar 18층 금동 먼저 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_2" target-2="zonenpcspawn:A_4972_3" type="despawn-npc" />
        <reaction amount="1" reg="1" target="zonenpcsquad:4972_2_S" type="set-party-number" />
        <reaction spawn-1="A_4972_2" spawn-2="A_4972_3" spawn-3="A_4972_50" spawn-delay="0" type="spawn-npc" />        
      </reaction-set>
      <reaction-set probability="50">
        <reaction text="necostar 18층 은동 먼저 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_2" target-2="zonenpcspawn:A_4972_3" type="despawn-npc" />
        <reaction amount="2" reg="1" target="zonenpcsquad:4972_2_S" type="set-party-number" />
        <reaction spawn-1="A_4972_2" spawn-2="A_4972_3" spawn-3="A_4972_50" spawn-delay="0" type="spawn-npc" />        
      </reaction-set>
    </decision>
  </script>
  
  
  <script alias="Zone_MusinTower_19_ai">
    <decision event="zone-open">
      <reaction-set probability="25">
        <reaction text="necostar 19층 정노 정희 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_2" target-2="zonenpcspawn:A_4973_3" target-3="zonenpcspawn:A_4973_4" target-4="zonenpcspawn:A_4973_5" type="despawn-npc" />
        <reaction amount="1" reg="1" target="zonenpcsquad:4973_2_S" type="set-party-number" />
        <reaction spawn-1="A_4973_2" spawn-2="A_4973_4" spawn-3="A_4973_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>
      <reaction-set probability="25">
        <reaction text="necostar 19층 정노 정애 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_2" target-2="zonenpcspawn:A_4973_3" target-3="zonenpcspawn:A_4973_4" target-4="zonenpcspawn:A_4973_5" type="despawn-npc" />
        <reaction amount="2" reg="1" target="zonenpcsquad:4973_2_S" type="set-party-number" />
        <reaction spawn-1="A_4973_2" spawn-2="A_4973_5" spawn-3="A_4973_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>
      <reaction-set probability="25">
        <reaction text="necostar 19층 정락 정희 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_2" target-2="zonenpcspawn:A_4973_3" target-3="zonenpcspawn:A_4973_4" target-4="zonenpcspawn:A_4973_5" type="despawn-npc" />
        <reaction amount="3" reg="1" target="zonenpcsquad:4973_2_S" type="set-party-number" />
        <reaction spawn-1="A_4973_3" spawn-2="A_4973_4" spawn-3="A_4973_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>
      <reaction-set probability="25">
        <reaction text="necostar 19층 정락 정애 선택" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_2" target-2="zonenpcspawn:A_4973_3" target-3="zonenpcspawn:A_4973_4" target-4="zonenpcspawn:A_4973_5" type="despawn-npc" />
        <reaction amount="4" reg="1" target="zonenpcsquad:4973_2_S" type="set-party-number" />
        <reaction spawn-1="A_4973_3" spawn-2="A_4973_5" spawn-3="A_4973_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>
    </decision>
  </script>



  
  <script alias="Zone_MusinTower_20_ai">
    <decision event="zone-open">
      <reaction-set>
        <reaction text="necostar 4974존 enter" type="debug-trace" />
        <reaction spawn-1="A_4974_50" spawn-delay="0" type="spawn-npc" />
      </reaction-set>
    </decision>
  </script>



  
  <script alias="4971_Footswich_1_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="4971_Footswich_1 -okd" type="debug-trace" />
        
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4971_door_in" target2="zoneenv2spawn:e_gate_4971_door_in_spawn" type="set-env-state" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="4972_Footswich_1_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="4972_Footswich_1 -okd" type="debug-trace" />
        
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4972_door_in" target2="zoneenv2spawn:e_gate_4972_door_in_spawn" type="set-env-state" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="4973_Footswich_1_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="4973_Footswich_1 -okd" type="debug-trace" />
        
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4973_door_in" target2="zoneenv2spawn:e_gate_4973_door_in_spawn" type="set-env-state" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="4974_Footswich_1_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="4974_Footswich_1 -okd" type="debug-trace" />
        
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4974_door_in" target2="zoneenv2spawn:e_gate_4974_door_in_spawn" type="set-env-state" />
      </reaction-set>
    </decision>
  </script>


  
  
  



   
  <script alias="MH_WA_Musin_extend_0007_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 민설 조합 전투시작 설아 얼음시퀀스로 변경" type="debug-trace" />
        <reaction immediately="y" target="event:npc-combat-start:npc" transit-cond-idx="1" type="transit-npc-combat" />        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4970_50" spawn-delay="0" type="spawn-npc" />        
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_4" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4970_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4970_7_S" spawn-delay="0" type="spawn-npc-groups" />
        
        <reaction caster="event:npc-combat-start:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-combat-start:npc" type="invoke-effect" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="2" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 설현 조합 전투시작" type="debug-trace" />                
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4970_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
        
         <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4970_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4970_7_S" spawn-delay="0" type="spawn-npc-groups" />
        
        <reaction caster="event:npc-combat-start:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-combat-start:npc" type="invoke-effect" />
      </reaction-set>
    </decision>
    


    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="70" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="0" />
      </filter-set>
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="40" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="1" />
      </filter-set>
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="10" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="2" />
      </filter-set>      
      <reaction-set>        
        <reaction amount="1" reg="1" target="event:attacked:defender" type="diff-npc-number" />
        
        <reaction caster="event:attacked:defender" effect="MH_MS3_B1_Assassin_DetectHide" target="event:attacked:defender" type="invoke-effect" />        
        <reaction special-id="5" target="event:attacked:defender" type="npc-fire-special" />
      </reaction-set>
    </decision>

    
    <decision event="invoked-effect">
      <filter-set>
        <filter subject="event:invoked-effect:npc" subject2="event:invoked-effect:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:invoked-effect:effect" subject2="event:invoked-effect:effect" type="effect-id" value="ME_ID2_Common_Modify_Ability_70_Signal" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="1" />
      </filter-set>      
      <reaction-set>
        <reaction special-id="3" target="zonenpcspawn:A_4970_2" type="npc-fire-special" />
        <reaction special-id="3" target="zonenpcspawn:A_4970_4" type="npc-fire-special" />        
      </reaction-set>
    </decision>
    
    <decision event="invoked-effect">
      <filter-set>
        <filter subject="event:invoked-effect:npc" subject2="event:invoked-effect:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:invoked-effect:effect" subject2="event:invoked-effect:effect" type="effect-id" value="ME_ID2_Common_Modify_Ability_70_Signal" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="2" />
      </filter-set>
      <reaction-set>
        <reaction special-id="3" target="zonenpcspawn:A_4970_2" type="npc-fire-special" />
        <reaction special-id="3" target="zonenpcspawn:A_4970_3" type="npc-fire-special" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter flag="y" flagtype="down" subject="event:attack:defender" subject2="event:attack:defender" type="effect-flag" />        
      </filter-set>
      <reaction-set>
        <reaction special-id="4" target="event:attack:attacker" type="npc-fire-special" />
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>        
                
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" /> 
                
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />        
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_4" type="despawn-npc" />
        <reaction spawn-1="A_4970_4" spawn-delay="0" type="spawn-npc" />        
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />       
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="2" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_3" type="despawn-npc" />
        <reaction spawn-1="A_4970_3" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />        
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
 
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 설아 죽음 남은애 전투 변경" type="debug-trace" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_4" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_4" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_4" transit-cond-idx="1" type="transit-npc-combat" />
        
        <reaction caster="zonenpcspawn:A_4970_3" effect="MH_MS3_B1_Assassin_DetectHide" target="zonenpcspawn:A_4970_3" type="invoke-effect" />
        <reaction caster="zonenpcspawn:A_4970_4" effect="MH_MS3_B1_Assassin_DetectHide" target="zonenpcspawn:A_4970_4" type="invoke-effect" />
      </reaction-set>
    </decision>    
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Musin_extend_0007 killed(설아 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4970_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4970_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4970_door_out" target2="zoneenv2spawn:e_gate_4970_door_out_spawn" type="set-env-state" />
        
        <reaction spawn-1="A_4970_6_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>


    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>        
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>        
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>

    
  <script alias="MH_WA_Musin_extend_0008_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="3" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 민현 조합 스폰 현아 시퀀스로 변경" type="debug-trace" />
        <reaction immediately="y" target="event:npc-combat-start:npc" transit-cond-idx="1" type="transit-npc-combat" />        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4970_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_4" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4970_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4970_7_S" spawn-delay="0" type="spawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="2" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 설현 조합 전투시작" type="debug-trace" />                        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4970_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_2" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4970_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4970_7_S" spawn-delay="0" type="spawn-npc-groups" />
      </reaction-set>
    </decision>
    
    
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="70" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="0" />
      </filter-set>
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="40" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="1" />
      </filter-set>
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="10" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="2" />
      </filter-set>      
      <reaction-set>
        <reaction amount="1" reg="1" target="event:attacked:defender" type="diff-npc-number" />
        
        <reaction caster="event:attacked:defender" effect="MH_MS3_B1_Assassin_DetectHide" target="event:attacked:defender" type="invoke-effect" />
        <reaction special-id="5" target="event:attacked:defender" type="npc-fire-special" />
      </reaction-set>
    </decision>

    
    <decision event="invoked-effect">
      <filter-set>
        <filter subject="event:invoked-effect:npc" subject2="event:invoked-effect:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:invoked-effect:effect" subject2="event:invoked-effect:effect" type="effect-id" value="ME_ID2_Common_Modify_Ability_70_Signal" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="2" />
      </filter-set>
      <reaction-set>
        <reaction special-id="3" target="zonenpcspawn:A_4970_2" type="npc-fire-special" />
        <reaction special-id="3" target="zonenpcspawn:A_4970_3" type="npc-fire-special" />
      </reaction-set>
    </decision>


    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter flag="y" flagtype="down" subject="event:attack:defender" subject2="event:attack:defender" type="effect-flag" />
      </filter-set>
      <reaction-set>
        <reaction special-id="4" target="event:attack:attacker" type="npc-fire-special" />
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="2" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_2" type="despawn-npc" />
        <reaction spawn-1="A_4970_2" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="3" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_4" type="despawn-npc" />
        <reaction spawn-1="A_4970_4" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>


    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 현아 죽음 남은애 전투 변경" type="debug-trace" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_4" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_4" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_4" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_2" transit-cond-idx="1" type="transit-npc-combat" />
        
        <reaction caster="zonenpcspawn:A_4970_2" effect="MH_MS3_B1_Assassin_DetectHide" target="zonenpcspawn:A_4970_2" type="invoke-effect" />
        <reaction caster="zonenpcspawn:A_4970_4" effect="MH_MS3_B1_Assassin_DetectHide" target="zonenpcspawn:A_4970_4" type="invoke-effect" />
      </reaction-set>
    </decision>
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Musin_extend_0008 killed(현아 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4970_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4970_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4970_door_out" target2="zoneenv2spawn:e_gate_4970_door_out_spawn" type="set-env-state" />
        
        <reaction spawn-1="A_4970_6_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>


   
  <script alias="MH_WA_Musin_extend_0009_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="3" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 민현 조합 스폰 민아 원거리 시퀀스로 변경" type="debug-trace" />
        <reaction immediately="y" target="event:npc-combat-start:npc" transit-cond-idx="1" type="transit-npc-combat" />        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4970_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />        
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4970_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4970_7_S" spawn-delay="0" type="spawn-npc-groups" />
        
        <reaction caster="event:npc-combat-start:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-combat-start:npc" type="invoke-effect" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 민설 조합 스폰" type="debug-trace" />        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4970_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />        
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4970_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4970_7_S" spawn-delay="0" type="spawn-npc-groups" />
      </reaction-set>
    </decision>
    
    
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="70" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="0" />
      </filter-set>
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="40" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="1" />
      </filter-set>
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="10" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="2" />
      </filter-set>      
      <reaction-set>
        <reaction amount="1" reg="1" target="event:attacked:defender" type="diff-npc-number" />
        
        <reaction caster="event:attacked:defender" effect="MH_MS3_B1_Assassin_DetectHide" target="event:attacked:defender" type="invoke-effect" />
        <reaction special-id="5" target="event:attacked:defender" type="npc-fire-special" />
      </reaction-set>
    </decision>
    
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter flag="y" flagtype="down" subject="event:attack:defender" subject2="event:attack:defender" type="effect-flag" />
      </filter-set>
      <reaction-set>
        <reaction special-id="4" target="event:attack:attacker" type="npc-fire-special" />
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_2" type="despawn-npc" />
        <reaction spawn-1="A_4970_2" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4970_2_S:reg-1" subject2="zonenpcsquad:4970_2_S:reg-1" type="number" value="3" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_3" type="despawn-npc" />
        <reaction spawn-1="A_4970_3" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4970_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 민아 죽음 남은애 전투 변경" type="debug-trace" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4970_2" transit-cond-idx="1" type="transit-npc-combat" />
        
        <reaction caster="zonenpcspawn:A_4970_3" effect="MH_MS3_B1_Assassin_DetectHide" target="zonenpcspawn:A_4970_3" type="invoke-effect" />
        <reaction caster="zonenpcspawn:A_4970_2" effect="MH_MS3_B1_Assassin_DetectHide" target="zonenpcspawn:A_4970_2" type="invoke-effect" />
      </reaction-set>
    </decision>
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Musin_extend_0009 killed(민아 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4970_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4970_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4970_door_out" target2="zoneenv2spawn:e_gate_4970_door_out_spawn" type="set-env-state" />
        
        <reaction spawn-1="A_4970_6_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4970_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4970_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4970_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>


  
  
  

  
  <script alias="MH_WA_Chawoonhang_0030_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 익현 전투시작" type="debug-trace" />
        
        <reaction caster="event:npc-combat-start:npc" effect="MH_MS3_B2_Warlock_Talisman_Show" target="event:npc-combat-start:npc" type="invoke-effect" />        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4971_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4971_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4971_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4971_7_S" spawn-delay="0" type="spawn-npc-groups" />
      </reaction-set>
    </decision>
    
    
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="1" />
        <filter op="eq" subject="zonenpcsquad:4971_2_S:reg-1" subject2="zonenpcsquad:4971_2_S:reg-1" type="number" value="1" />
      </filter-set>
      <reaction-set>        
        <reaction attack-target="event:npc-special:target" spawn-1="A_4971_3" spawn-delay="0" spawn-radius="200" spawn-target="event:npc-special:npc" type="spawn-npc" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="1" />
        <filter op="eq" subject="zonenpcsquad:4971_2_S:reg-1" subject2="zonenpcsquad:4971_2_S:reg-1" type="number" value="2" />
      </filter-set>
      <reaction-set>    
        <reaction attack-target="event:npc-special:target" spawn-1="A_4971_4" spawn-delay="0" spawn-radius="200" spawn-target="event:npc-special:target" type="spawn-npc" />
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />        
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4971_50" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4971_3" target2="zonenpcspawn:A_4971_3" type="kill" />
        <reaction target="zonenpcspawn:A_4971_4" target2="zonenpcspawn:A_4971_4" type="kill" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4971_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4971_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Chawoonhang_0030 killed(익현 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4971_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4971_50" type="invoke-effect" />
        <reaction target="zonenpcspawn:A_4971_3" target2="zonenpcspawn:A_4971_3" type="kill" />
        <reaction target="zonenpcspawn:A_4971_4" target2="zonenpcspawn:A_4971_4" type="kill" />                
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4971_door_out" target2="zoneenv2spawn:e_gate_4971_door_out_spawn" type="set-env-state" />
        
        <reaction enable="y" target="zoneenv:e_button_4961yongmak_1" target2="zoneenv2spawn:e_button_4961yongmak_1_spawn" type="set-env-enable" />
        
        <reaction spawn-1="A_4971_6_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4971_5" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4971_7_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="ME_WA_Musin_extend_0015_ai">
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction from="zonenpcspawn:A_4971_2" social="MH_WA_Chawoonhang_0030_soc_02" type="play-social" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="21" />
      </filter-set>
      <reaction-set>
        
        <reaction caster="event:npc-special:npc" effect="ME_YukSon_Guard_DetectHide" target="event:npc-special:npc" type="invoke-effect" />
      </reaction-set>
    </decision>
    
    
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_4" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_4" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="ME_WA_Musin_extend_0016_ai">
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction from="zonenpcspawn:A_4971_2" social="MH_WA_Chawoonhang_0030_soc_02" type="play-social" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="21" />
      </filter-set>
      <reaction-set>
        
        <reaction caster="event:npc-special:npc" effect="ME_YukSon_Guard_DetectHide" target="event:npc-special:npc" type="invoke-effect" />
      </reaction-set>
    </decision>
    
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4971_4" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4971_4" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="ME_WA_Musin_extend_0010_ai">
  </script>
  
  <script alias="MH_WA_Tiger_0003_ai">
  </script>

  
  
  
  

  
  <script alias="ME_WA_Musin_extend_0003_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4972_2_S:reg-1" subject2="zonenpcsquad:4972_2_S:reg-1" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 금동 먼저" type="debug-trace" />
        <reaction special-id="3" target="event:npc-combat-start:npc" type="npc-fire-special" />        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4972_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4972_3" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4972_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4972_4" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4972_6_S" spawn-delay="0" type="spawn-npc-groups" />        
      </reaction-set>
    </decision>
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4972_2_S:reg-1" subject2="zonenpcsquad:4972_2_S:reg-1" type="number" value="2" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 은동 먼저" type="debug-trace" />
        <reaction special-id="4" target="event:npc-combat-start:npc" type="npc-fire-special" />       
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4972_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4972_3" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4972_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4972_4" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4972_6_S" spawn-delay="0" type="spawn-npc-groups" />
      </reaction-set>
    </decision>

    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="3" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="1" />
      </filter-set>
      <reaction-set>        
        <reaction immediately="y" target="event:npc-special:npc" transit-cond-idx="1" type="transit-npc-combat" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="3" />
        <filter op="neq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction special-id="3" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="4" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction immediately="y" target="event:npc-special:npc" transit-cond-idx="1" type="transit-npc-combat" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="4" />
        <filter op="neq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction special-id="4" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>
    </decision>

    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="2" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="2" />
        <filter either="y" subject="event:npc-special:npc" subject2="event:npc-special:npc" type="effect-attribute" value-1="다운" />
        <filter op="eq" subject="event:npc-special:npc:npc-party:num" subject2="event:npc-special:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="2" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="2" />
        <filter either="y" subject="event:npc-special:npc" subject2="event:npc-special:npc" type="effect-attribute" value-1="기절" />
        <filter op="eq" subject="event:npc-special:npc:npc-party:num" subject2="event:npc-special:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="2" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="2" />
        <filter either="y" subject="event:npc-special:npc" subject2="event:npc-special:npc" type="effect-attribute" value-1="그로기" />
        <filter op="eq" subject="event:npc-special:npc:npc-party:num" subject2="event:npc-special:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="2" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="2" />
        <filter either="y" subject="event:npc-special:npc" subject2="event:npc-special:npc" type="effect-attribute" value-1="넉백" />
        <filter op="eq" subject="event:npc-special:npc:npc-party:num" subject2="event:npc-special:npc:npc-party:num" type="number" value="2" />
      </filter-set>    
      <reaction-set>
        <reaction effect="MH_common_CasterSkillBlock" target="zonenpcspawn:A_4972_3" type="invoke-effect" />
        <reaction effect="ME_ID2_Common_Dispel_Modify_Ability_69" target="zonenpcspawn:A_4972_3" type="invoke-effect" />
        <reaction effect="ME_ID2_Common_Dispel_Modify_Ability_71" target="zonenpcspawn:A_4972_3" type="invoke-effect" />
        <reaction effect="ME_ID2_Common_Dispel_Modify_Ability_139" target="zonenpcspawn:A_4972_3" type="invoke-effect" />
        <reaction effect="ME_ID2_Common_Dispel_Modify_Ability_140" target="zonenpcspawn:A_4972_3" type="invoke-effect" />
        <reaction special-id="3" target="zonenpcspawn:A_4972_3" type="npc-fire-special" />
        <reaction special-id="4" target="event:npc-special:npc" type="npc-fire-special" />        
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />       
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4972_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_3" type="despawn-npc" />
        <reaction spawn-1="A_4972_3" spawn-delay="0" type="spawn-npc" />
        <reaction group="zonenpcsquad:4972_4_S" index-1="1" type="despawn-npc-index" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_4" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4972_6_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4972_50" type="reset-npc-all-hate" />
        <reaction group="zonenpcsquad:4972_4_S" index-1="1" type="despawn-npc-index" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_4" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4972_6_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>    
        
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction special-id="3" target="zonenpcspawn:A_4972_3" type="npc-fire-special" />        
      </reaction-set>
    </decision>
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="ME_WA_Musin_extend_0003 killed(금동 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4972_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4972_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4972_door_out" target2="zoneenv2spawn:e_gate_4972_door_out_spawn" type="set-env-state" />
        
        <reaction enable="y" target="zoneenv:e_button_4962yongmak_1" target2="zoneenv2spawn:e_button_4962yongmak_1_spawn" type="set-env-enable" />
        
        <reaction spawn-1="A_4972_5_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_4" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4972_6_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4972_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4972_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4972_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4972_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4972_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4972_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="ME_WA_Musin_extend_0004_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4972_2_S:reg-1" subject2="zonenpcsquad:4972_2_S:reg-1" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 금동 먼저" type="debug-trace" />
        <reaction special-id="4" target="event:npc-combat-start:npc" type="npc-fire-special" />        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4972_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4972_2" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4972_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4972_4" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4972_6_S" spawn-delay="0" type="spawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="zonenpcsquad:4972_2_S:reg-1" subject2="zonenpcsquad:4972_2_S:reg-1" type="number" value="2" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 은동 먼저" type="debug-trace" />
        <reaction special-id="3" target="event:npc-combat-start:npc" type="npc-fire-special" />
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4972_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4972_2" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4972_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4972_4" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4972_6_S" spawn-delay="0" type="spawn-npc-groups" />
      </reaction-set>
    </decision>

    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="3" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction immediately="y" target="event:npc-special:npc" transit-cond-idx="1" type="transit-npc-combat" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="3" />
        <filter op="neq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction special-id="3" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="4" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction immediately="y" target="event:npc-special:npc" transit-cond-idx="1" type="transit-npc-combat" />
      </reaction-set>
    </decision>
    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="4" />
        <filter op="neq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction special-id="4" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>
    </decision>

    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="2" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="2" />
        <filter either="y" subject="event:npc-special:npc" subject2="event:npc-special:npc" type="effect-attribute" value-1="다운" />
        <filter op="eq" subject="event:npc-special:npc:npc-party:num" subject2="event:npc-special:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="2" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="2" />
        <filter either="y" subject="event:npc-special:npc" subject2="event:npc-special:npc" type="effect-attribute" value-1="기절" />
        <filter op="eq" subject="event:npc-special:npc:npc-party:num" subject2="event:npc-special:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="2" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="2" />
        <filter either="y" subject="event:npc-special:npc" subject2="event:npc-special:npc" type="effect-attribute" value-1="그로기" />
        <filter op="eq" subject="event:npc-special:npc:npc-party:num" subject2="event:npc-special:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="2" />
        <filter op="eq" subject="event:npc-special:action-result" subject2="event:npc-special:action-result" type="number" value="2" />
        <filter either="y" subject="event:npc-special:npc" subject2="event:npc-special:npc" type="effect-attribute" value-1="넉백" />
        <filter op="eq" subject="event:npc-special:npc:npc-party:num" subject2="event:npc-special:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        <reaction effect="MH_common_CasterSkillBlock" target="zonenpcspawn:A_4972_2" type="invoke-effect" />
        <reaction effect="ME_ID2_Common_Dispel_Modify_Ability_69" target="zonenpcspawn:A_4972_2" type="invoke-effect" />
        <reaction effect="ME_ID2_Common_Dispel_Modify_Ability_71" target="zonenpcspawn:A_4972_2" type="invoke-effect" />
        <reaction effect="ME_ID2_Common_Dispel_Modify_Ability_139" target="zonenpcspawn:A_4972_2" type="invoke-effect" />
        <reaction effect="ME_ID2_Common_Dispel_Modify_Ability_140" target="zonenpcspawn:A_4972_2" type="invoke-effect" />
        <reaction special-id="3" target="zonenpcspawn:A_4972_2" type="npc-fire-special" />
        <reaction special-id="4" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4972_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_2" type="despawn-npc" />
        <reaction spawn-1="A_4972_2" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_4" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4972_6_S" respawn-after-despawn="n" type="despawn-npc-groups" />       
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4972_50" type="reset-npc-all-hate" />       
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_4" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4972_6_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4972_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction special-id="3" target="zonenpcspawn:A_4972_2" type="npc-fire-special" />        
      </reaction-set>
    </decision>
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="ME_WA_Musin_extend_0004 killed(은동 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4972_50" type="set-undying" undying="n" />        
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4972_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4972_door_out" target2="zoneenv2spawn:e_gate_4972_door_out_spawn" type="set-env-state" />
        
        <reaction enable="y" target="zoneenv:e_button_4962yongmak_1" target2="zoneenv2spawn:e_button_4962yongmak_1_spawn" type="set-env-enable" />
        
        <reaction spawn-1="A_4972_5_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4972_4" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4972_6_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4972_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4972_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4972_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4972_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4972_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4972_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>    
  </script>

  
  
  

  
  <script alias="MH_WA_Musin_extend_0011_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />        
      </filter-set>
      <reaction-set>                       
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4973_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4973_6" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4973_8_S" spawn-delay="0" type="spawn-npc-groups" />
        
        <reaction caster="event:npc-combat-start:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-combat-start:npc" type="invoke-effect" />
      </reaction-set>
    </decision>

    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="21" />
      </filter-set>
      <reaction-set>
        
        <reaction caster="event:npc-special:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-special:npc" type="invoke-effect" />
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4973_2_S:reg-1" subject2="zonenpcsquad:4973_2_S:reg-1" type="number" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_4" type="despawn-npc" />
        <reaction spawn-1="A_4973_4" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />        
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4973_2_S:reg-1" subject2="zonenpcsquad:4973_2_S:reg-1" type="number" value="2" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_5" type="despawn-npc" />
        <reaction spawn-1="A_4973_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction immediately="y" target="zonenpcspawn:A_4973_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4973_4" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4973_5" transit-cond-idx="1" type="transit-npc-combat" />        
      </reaction-set>
    </decision>    
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Musin_extend_0011 killed(정노 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4973_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4973_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4973_door_out" target2="zoneenv2spawn:e_gate_4973_door_out_spawn" type="set-env-state" />
        
        <reaction enable="y" target="zoneenv:e_button_4963yongmak_1" target2="zoneenv2spawn:e_button_4963yongmak_1_spawn" type="set-env-enable" />
        
        <reaction spawn-1="A_4973_7_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>    
  </script>

  
  <script alias="MH_WA_Musin_extend_0012_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4973_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4973_6" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4973_8_S" spawn-delay="0" type="spawn-npc-groups" />
        
        <reaction caster="event:npc-combat-start:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-combat-start:npc" type="invoke-effect" />
      </reaction-set>
    </decision>

    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="21" />
      </filter-set>
      <reaction-set>
        
        <reaction caster="event:npc-special:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-special:npc" type="invoke-effect" />
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4973_2_S:reg-1" subject2="zonenpcsquad:4973_2_S:reg-1" type="number" value="3" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_4" type="despawn-npc" />
        <reaction spawn-1="A_4973_4" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4973_2_S:reg-1" subject2="zonenpcsquad:4973_2_S:reg-1" type="number" value="4" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_5" type="despawn-npc" />
        <reaction spawn-1="A_4973_5" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction immediately="y" target="zonenpcspawn:A_4973_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4973_4" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4973_5" transit-cond-idx="1" type="transit-npc-combat" />
      </reaction-set>
    </decision>
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Musin_extend_0012 killed(정락 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4973_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4973_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4973_door_out" target2="zoneenv2spawn:e_gate_4973_door_out_spawn" type="set-env-state" />
        
        <reaction enable="y" target="zoneenv:e_button_4963yongmak_1" target2="zoneenv2spawn:e_button_4963yongmak_1_spawn" type="set-env-enable" />
        
        <reaction spawn-1="A_4973_7_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>

  
<script alias="MH_WA_Musin_extend_0013_ai" parent="Boss_Immune_ai">
  
  <decision event="invoked-effect" forward="y" />

  <decision event="npc-combat-start">
    <filter-set>
      <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
    </filter-set>
    <reaction-set>      
      <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
      
      <reaction spawn-1="A_4973_50" spawn-delay="0" type="spawn-npc" />
      <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
      <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
      <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
      <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
      
      <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4973_6" spawn-delay="0" type="spawn-npc" />
      
      <reaction group-1="zonenpcsquad:4973_8_S" spawn-delay="0" type="spawn-npc-groups" />
    </reaction-set>
  </decision>

  <decision event="npc-special">
    <filter-set>
      <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
      <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="21" />
    </filter-set>
    <reaction-set>
      
      <reaction caster="event:npc-special:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-special:npc" type="invoke-effect" />
    </reaction-set>
  </decision>

  <decision event="npc-combat-end">
    <filter-set>
      <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
      <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
      <filter op="eq" subject="zonenpcsquad:4973_2_S:reg-1" subject2="zonenpcsquad:4973_2_S:reg-1" type="number" value="1" />
      <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
    </filter-set>
    <reaction-set>
      
      <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
      
      <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
      <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
      <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
      
      <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_2" type="despawn-npc" />
      <reaction spawn-1="A_4973_2" spawn-delay="0" type="spawn-npc" />
      
      <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
      
      <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
    </reaction-set>
  </decision>
  <decision event="npc-combat-end">
    <filter-set>
      <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
      <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
      <filter op="eq" subject="zonenpcsquad:4973_2_S:reg-1" subject2="zonenpcsquad:4973_2_S:reg-1" type="number" value="3" />
      <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
    </filter-set>
    <reaction-set>
      
      <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
      
      <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
      <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
      <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
      
      <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_3" type="despawn-npc" />
      <reaction spawn-1="A_4973_3" spawn-delay="0" type="spawn-npc" />
      
      <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
      
      <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
    </reaction-set>
  </decision>
  <decision event="npc-combat-end">
    <filter-set>
      <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
      <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
      <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
    </filter-set>
    <reaction-set>
      
      <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
      
      <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
      <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
      <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
      
      <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
      
      <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
    </reaction-set>
  </decision>

  
  <decision event="killed">
    <filter-set>
      <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
      <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
    </filter-set>
    <reaction-set>
      <reaction immediately="y" target="zonenpcspawn:A_4973_2" transit-cond-idx="1" type="transit-npc-combat" />
      <reaction immediately="y" target="zonenpcspawn:A_4973_3" transit-cond-idx="1" type="transit-npc-combat" />
      <reaction immediately="y" target="zonenpcspawn:A_4973_5" transit-cond-idx="1" type="transit-npc-combat" />
    </reaction-set>
  </decision>
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Musin_extend_0013 killed(정희 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4973_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4973_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4973_door_out" target2="zoneenv2spawn:e_gate_4973_door_out_spawn" type="set-env-state" />
        
        <reaction enable="y" target="zoneenv:e_button_4963yongmak_1" target2="zoneenv2spawn:e_button_4963yongmak_1_spawn" type="set-env-enable" />
        
        <reaction spawn-1="A_4973_7_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

  
  <decision event="attack">
    <filter-set>
      <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
    </filter-set>
    <reaction-set>
      <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
      <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
    </reaction-set>
  </decision>
  
  <decision event="attack">
    <filter-set>
      <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
    </filter-set>
    <reaction-set>
      <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
      <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
      <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
      <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
      <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
    </reaction-set>
  </decision>
  
  <decision event="attacked">
    <filter-set>
      <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
    </filter-set>
    <reaction-set>
      <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
      <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
      <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
      <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
      <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
    </reaction-set>
  </decision>
</script>

  
  <script alias="MH_WA_Musin_extend_0014_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>       
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        
        <reaction spawn-1="A_4973_50" spawn-delay="0" type="spawn-npc" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:npc-combat-start:target" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4973_6" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4973_8_S" spawn-delay="0" type="spawn-npc-groups" />
      </reaction-set>
    </decision>

    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="21" />
      </filter-set>
      <reaction-set>
        
        <reaction caster="event:npc-special:npc" effect="MH_MS3_B1_Assassin_DetectHide" target="event:npc-special:npc" type="invoke-effect" />
      </reaction-set>
    </decision>

    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4973_2_S:reg-1" subject2="zonenpcsquad:4973_2_S:reg-1" type="number" value="2" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_2" type="despawn-npc" />
        <reaction spawn-1="A_4973_2" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="zonenpcsquad:4973_2_S:reg-1" subject2="zonenpcsquad:4973_2_S:reg-1" type="number" value="4" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_3" type="despawn-npc" />
        <reaction spawn-1="A_4973_3" spawn-delay="0" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />
        <filter op="eq" subject="event:npc-combat-end:npc:npc-party:num" subject2="event:npc-combat-end:npc:npc-party:num" type="number" value="2" />
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />
        <reaction target="zonenpcspawn:A_4973_50" type="reset-npc-all-hate" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="1" />
      </filter-set>
      <reaction-set>
        <reaction immediately="y" target="zonenpcspawn:A_4973_2" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4973_3" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="zonenpcspawn:A_4973_4" transit-cond-idx="1" type="transit-npc-combat" />
      </reaction-set>
    </decision>
    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:killed:defender:npc-party:num" subject2="event:killed:defender:npc-party:num" type="number" value="0" />
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Musin_extend_0014 killed(정애 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4973_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4973_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4973_door_out" target2="zoneenv2spawn:e_gate_4973_door_out_spawn" type="set-env-state" />
        
        <reaction enable="y" target="zoneenv:e_button_4963yongmak_1" target2="zoneenv2spawn:e_button_4963yongmak_1_spawn" type="set-env-enable" />
        
        <reaction spawn-1="A_4973_7_1" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4973_6" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4973_8_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attack:defender" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_2" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_3" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_4" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_5" type="diff-npc-hate" />
        <reaction amount="100" opponent="event:attacked:attacker" target="zonenpcspawn:A_4973_50" type="diff-npc-hate" />
      </reaction-set>
    </decision>
  </script>


  
  
  

  
  <script alias="MH_WA_Musin_extend_0006_ai" parent="Boss_Immune_ai">
    
    <decision event="invoked-effect" forward="y" />

    <decision event="npc-combat-start">
      <filter-set>
        <filter subject="event:npc-combat-start:npc" subject2="event:npc-combat-start:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>        
        <reaction amount="0" reg="1" target="event:npc-combat-start:npc" type="set-npc-number" />
        <reaction amount="0" reg="1" target="zonenpcsquad:4974_2_S" type="set-party-number" />
        
        <reaction spawn-1="A_4974_50" spawn-delay="0" type="spawn-npc" />
        
        <reaction attack-target="event:npc-combat-start:target" spawn-1="A_4974_3" spawn-delay="0" type="spawn-npc" />
        
        <reaction group-1="zonenpcsquad:4974_5_S" spawn-delay="0" type="spawn-npc-groups" />        
      </reaction-set>
    </decision>

    
    <decision event="attacked">
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="80" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="0" />
      </filter-set>      
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="40" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="2" />
      </filter-set>      
      <reaction-set>
        <reaction amount="1" reg="1" target="event:attacked:defender" type="diff-npc-number" />
        <reaction immediately="y" target="event:attacked:defender" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction special-id="5" target="event:attacked:defender" type="npc-fire-special" />
      </reaction-set>
    </decision>

    <decision event="attacked">      
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="60" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="1" />
      </filter-set>      
      <filter-set>
        <filter subject="event:attacked:defender" subject2="event:attacked:defender" type="event-broadcasted" value="n" />
        <filter field="hp" op="le" subject="event:attacked:defender" subject2="event:attacked:defender" type="prop-percent" value="20" />
        <filter op="eq" subject="event:attacked:defender:reg-1" subject2="event:attacked:defender:reg-1" type="number" value="3" />
      </filter-set>
      <reaction-set>
        <reaction amount="1" reg="1" target="event:attacked:defender" type="diff-npc-number" />
        <reaction special-id="5" target="event:attacked:defender" type="npc-fire-special" />
      </reaction-set>
    </decision>



    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="11" />
        <filter op="eq" subject="zonenpcsquad:4974_2_S:reg-1" subject2="zonenpcsquad:4974_2_S:reg-1" type="number" value="0" />
      </filter-set>
      <reaction-set probability="50">
        
        <reaction from="event:npc-special:npc" social="ME_WA_Musin_extend_0006_soc_08" type="play-social" />
        <reaction amount="1" reg="1" target="zonenpcsquad:4974_2_S" type="set-party-number" />
        <reaction special-id="3" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>
      <reaction-set probability="50">
        
        <reaction from="event:npc-special:npc" social="ME_WA_Musin_extend_0006_soc_08" type="play-social" />
        <reaction amount="1" reg="1" target="zonenpcsquad:4974_2_S" type="set-party-number" />
        <reaction special-id="4" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>      
    </decision>

    <decision event="npc-special">
      <filter-set>
        <filter subject="event:npc-special:npc" subject2="event:npc-special:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:npc-special:step" subject2="event:npc-special:step" type="number" value="11" />
        <filter op="ge" subject="zonenpcsquad:4974_2_S:reg-1" subject2="zonenpcsquad:4974_2_S:reg-1" type="number" value="1" />
      </filter-set>
      <reaction-set probability="50">        
        <reaction amount="1" reg="1" target="zonenpcsquad:4974_2_S" type="set-party-number" />
        <reaction special-id="3" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>
      <reaction-set probability="50">        
        <reaction amount="1" reg="1" target="zonenpcsquad:4974_2_S" type="set-party-number" />
        <reaction special-id="4" target="event:npc-special:npc" type="npc-fire-special" />
      </reaction-set>
    </decision>

    
    <decision event="invoked-effect">
      <filter-set>
        <filter subject="event:invoked-effect:npc" subject2="event:invoked-effect:npc" type="event-broadcasted" value="n" />
        <filter op="eq" subject="event:invoked-effect:effect" subject2="event:invoked-effect:effect" type="effect-id" value="ME_ID2_Common_Modify_Ability_136_Signal" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 소양상 물 먹고 광폭화" type="debug-trace" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
        <reaction immediately="y" target="event:invoked-effect:npc" transit-cond-idx="1" type="transit-npc-combat" />
      </reaction-set>
    </decision>
    
    <decision event="npc-combat-end">
      <filter-set>
        <filter subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="event-broadcasted" value="n" />
        <filter field="hp" op="ge" subject="event:npc-combat-end:npc" subject2="event:npc-combat-end:npc" type="prop" value="1" />       
      </filter-set>
      <reaction-set>
        
        <reaction amount="0" reg="1" target="event:npc-combat-end:npc" type="set-npc-number" />
        <reaction amount="0" reg="1" target="zonenpcsquad:4974_2_S" type="set-party-number" />
        
        <reaction target="event:npc-combat-end:npc" target2="event:npc-combat-end:npc" type="heal-max" />
        <reaction target="event:npc-combat-end:npc" type="reset-npc-all-hate" />        
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4974_3" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4974_5_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    <decision event="killed">
      <filter-set>
        <filter subject="event:killed:defender" subject2="event:killed:defender" type="event-broadcasted" value="n" />        
      </filter-set>
      <reaction-set>
        <reaction text="MH_WA_Musin_extend_0006 killed(소양상 죽음) -okd" type="debug-trace" />
        <reaction target="zonenpcspawn:A_4974_50" type="set-undying" undying="n" />
        <reaction caster="event:killed:attacker" effect="ME_ID2_Common_Percent_Damage_100_NoMassage" target="zonenpcspawn:A_4974_50" type="invoke-effect" />
        
        <reaction state="open" state2="open" target="zoneenv:e_gate_4974_door_out" target2="zoneenv2spawn:e_gate_4974_door_out_spawn" type="set-env-state" />
        
        <reaction enable="y" target="zoneenv:e_button_4964yongmak_1" target2="zoneenv2spawn:e_button_4964yongmak_1_spawn" type="set-env-enable" />
        
        <reaction spawn-1="A_4974_2_1" spawn-2="A_4974_4_1" spawn-delay="3000" type="spawn-npc" />
        
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="zonenpcspawn:A_4974_3" type="despawn-npc" />
        
        <reaction despawn-force="y" group-1="zonenpcsquad:4974_5_S" respawn-after-despawn="n" type="despawn-npc-groups" />
      </reaction-set>
    </decision>

    
    <decision event="attack">
      <filter-set>
        <filter subject="event:attack:attacker" subject2="event:attack:attacker" type="event-broadcasted" value="n" />
        <filter subject="event:attack:defender" subject2="event:attack:defender" type="summoned" />
      </filter-set>
      <reaction-set>
        <reaction caster="event:attack:attacker" effect="ME_Common_None_HateDown" target="event:attack:defender" type="invoke-effect" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
        <reaction amount="10000" opponent="event:attack:defender:my-summoner" target="event:attack:attacker" type="diff-npc-hate" />
      </reaction-set>
    </decision>    
  </script>




  
  <script alias="ME_WA_Dummy_0024_ai">
    <decision event="npc-spawn">
      <filter-set>
        <filter subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 무신의탑 16층 투명NPC 스폰" type="debug-trace" />
        <reaction target="event:npc-spawn:npc" type="set-undying" undying="y" />
      </reaction-set>
    </decision>
  </script>

  <script alias="ME_WA_Dummy_0025_ai">
    <decision event="npc-spawn">
      <filter-set>
        <filter subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 무신의탑 17층 투명NPC 스폰" type="debug-trace" />
        <reaction target="event:npc-spawn:npc" type="set-undying" undying="y" />
      </reaction-set>
    </decision>
  </script>

  <script alias="ME_WA_Dummy_0026_ai">
    <decision event="npc-spawn">
      <filter-set>
        <filter subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 무신의탑 18층 투명NPC 스폰" type="debug-trace" />
        <reaction target="event:npc-spawn:npc" type="set-undying" undying="y" />
      </reaction-set>
    </decision>
  </script>

  <script alias="ME_WA_Dummy_0027_ai">
    <decision event="npc-spawn">
      <filter-set>
        <filter subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 무신의탑 19층 투명NPC 스폰" type="debug-trace" />
        <reaction target="event:npc-spawn:npc" type="set-undying" undying="y" />
      </reaction-set>
    </decision>
  </script>

  <script alias="ME_WA_Dummy_0028_ai">
    <decision event="npc-spawn">
      <filter-set>
        <filter subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 무신의탑 20층 투명NPC 스폰" type="debug-trace" />
        <reaction target="event:npc-spawn:npc" type="set-undying" undying="y" />
      </reaction-set>
    </decision>
  </script>

  <script alias="ME_WA_Dummy_0030_ai">
    <decision event="npc-spawn">
      <filter-set>
        <filter subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 무신의탑 19층 전기장판 투명NPC 스폰" type="debug-trace" />
        <reaction target="event:npc-spawn:npc" type="set-undying" undying="y" />
      </reaction-set>
    </decision>
  </script>

  <script alias="ME_WA_Dummy_0031_ai">
    <decision event="npc-spawn">
      <filter-set>
        <filter subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="event-broadcasted" value="n" />
      </filter-set>
      <reaction-set>
        <reaction text="necostar 무신의탑 19층 불속성 투명NPC 스폰" type="debug-trace" />
        <reaction target="event:npc-spawn:npc" type="set-undying" undying="y" />
      </reaction-set>
    </decision>
  </script>
  
  
  

  

  
  <script alias="4970_Footswich_1_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="16층 입장 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0001_Start_Act" target="zonenpcspawn:A_4970_6" type="set-npc-act" />
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="CH_WA_MusinTower_Extend_0001_ai">

    
    <decision event="npc-spawn">
      <filter-set>
        <filter spawn="A_4970_6_1" subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="npc-spawn" />        
      </filter-set>
      <reaction-set>
        <reaction text="16층 종료 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0001_End_Act" target="event:npc-spawn:npc" type="set-npc-act" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter op="eq" subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0001_Start_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="16층 입장 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0001_End_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="16층 종료 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>
  </script>

  

  
  <script alias="4971_Footswich_2_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="17층 입장 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0002_Start_Act" target="zonenpcspawn:A_4971_6" type="set-npc-act" />
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="CH_WA_MusinTower_Extend_0002_ai">

    
    <decision event="npc-spawn">
      <filter-set>
        <filter spawn="A_4971_6_1" subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="npc-spawn" />
      </filter-set>
      <reaction-set>
        <reaction text="17층 종료 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0002_End_Act" target="event:npc-spawn:npc" type="set-npc-act" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter op="eq" subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0002_Start_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="17층 입장 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0002_End_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="17층 종료 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>
  </script>


  

  
  <script alias="4972_Footswich_2_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="18층 입장 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0003_Start_Act" target="zonenpcspawn:A_4972_5" type="set-npc-act" />
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="CH_WA_MusinTower_Extend_0003_ai">

    
    <decision event="npc-spawn">
      <filter-set>
        <filter spawn="A_4972_5_1" subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="npc-spawn" />
      </filter-set>
      <reaction-set>
        <reaction text="18층 종료 연극 시작 - okd" type="debug-trace" />        
        <reaction seq="CH_WA_MusinTower_Extend_0003_End_Act" target="event:npc-spawn:npc" type="set-npc-act" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter op="eq" subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0003_Start_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="18층 입장 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0003_End_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="18층 종료 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>
  </script>

  

  
  <script alias="4973_Footswich_2_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="19층 입장 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0004_Start_Act" target="zonenpcspawn:A_4973_7" type="set-npc-act" />
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
      </reaction-set>
    </decision>
  </script>


  
  <script alias="CH_WA_MusinTower_Extend_0004_ai">

    
    <decision event="npc-spawn">
      <filter-set>
        <filter spawn="A_4973_7_1" subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="npc-spawn" />
      </filter-set>
      <reaction-set>
        <reaction text="19층 종료 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0004_End_Act" target="event:npc-spawn:npc" type="set-npc-act" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter op="eq" subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0004_Start_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="19층 입장 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0004_End_Act" />
      </filter-set>
      <reaction-set>
                <reaction text="19층 종료 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>
  </script>

  

  
  <script alias="4974_Footswich_2_ai">
    <decision event="env-entered">
      <filter-set>
        <filter subject="event:env-entered:creature" subject2="event:env-entered:creature" type="pc" />
      </filter-set>
      <reaction-set>
        <reaction text="20층 입장 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0005_Start_Act" target="zonenpcspawn:A_4974_4" type="set-npc-act" />
        <reaction enable="n" target="event:env-entered:env" target2="event:env-entered:env" type="set-env-enable" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="CH_WA_MusinTower_Extend_0005_ai">

    
    <decision event="npc-spawn">
      <filter-set>
        <filter spawn="A_4974_4_1" subject="event:npc-spawn:npc" subject2="event:npc-spawn:npc" type="npc-spawn" />
      </filter-set>
      <reaction-set>
        <reaction text="20층 청운선사 종료 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0005_End_Act" target="event:npc-spawn:npc" type="set-npc-act" />
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter op="eq" subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0005_Start_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="20층 청운선사 입장 연극 후 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />          
      </reaction-set>
    </decision>

    
    <decision event="act-finished">
      <filter-set>
        <filter subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0005_End_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="20층 청운선사 종료 연극 디스폰 - okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
        
        <reaction text="20층 소양상 종료 연극 시작 - okd" type="debug-trace" />
        <reaction seq="CH_WA_MusinTower_Extend_0006_End_Act" target="zonenpcspawn:A_4974_2_1" type="set-npc-act" />
      </reaction-set>
    </decision>
  </script>

  
  <script alias="CH_WA_Musin_extend_0001_ai">

    
    <decision event="act-finished">
      <filter-set>
        <filter subject="event:act-finished:seq" subject2="event:act-finished:seq" type="act-sequence" value="CH_WA_MusinTower_Extend_0006_End_Act" />
      </filter-set>
      <reaction-set>
        <reaction text="20층 소양상 종료 연극 후 디스폰 -okd" type="debug-trace" />
        <reaction despawn-force="y" respawn-after-despawn="n" target-1="event:act-finished:npc" type="despawn-npc" />
      </reaction-set>
    </decision>
  </script>  
</table>